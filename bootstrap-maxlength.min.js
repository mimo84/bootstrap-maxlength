/* ==========================================================
 * bootstrap-maxlength.js v1.4.2
 * 
 * Copyright (c) 2013 Maurizio Napoleoni; 
 *
 * Licensed under the terms of the MIT license.
 * See: https://github.com/mimo84/bootstrap-maxlength/blob/master/LICENSE
 * ========================================================== */
(function(e){"use strict";e.fn.extend({maxlength:function(t,n){function s(e){var n=e.val();var r=n.match(/\n/g);var i=0;var s=0;if(t.utf8){i=r?getUTF8Length(r):0;s=getUTF8Length(e.val())+i}else{i=r?r.length:0;s=e.val().length+i}return s}function o(e){var t=0;for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t++}else if(r>127&&r<2048){t=t+2}else{t=t+3}}return t}function u(e,n,r){var i=true;if(!t.alwaysShow&&r-s(e)>n){i=false}return i}function a(e,t){var n=t-s(e);return n}function f(e){e.css({display:"block"})}function l(e){e.css({display:"none"})}function c(e,n){var r="";if(t.message){r=t.message.replace("%charsTyped%",n).replace("%charsRemaining%",e-n).replace("%charsTotal%",e)}else{if(t.preText){r+=t.preText}if(!t.showCharsTyped){r+=e-n}else{r+=n}if(t.showMaxLength){r+=t.separator+e}if(t.postText){r+=t.postText}}return r}function h(e,n,r,i){i.html(c(r,r-e));if(e>0){if(u(n,t.threshold,r)){f(i.removeClass(t.limitReachedClass).addClass(t.warningClass))}else{l(i)}}else{f(i.removeClass(t.warningClass).addClass(t.limitReachedClass))}}function p(t){var n=t[0];return e.extend({},typeof n.getBoundingClientRect==="function"?n.getBoundingClientRect():{width:n.offsetWidth,height:n.offsetHeight},t.offset())}function d(e,n){var r=p(e),i=e.outerWidth(),s=n.outerWidth(),o=n.width(),u=n.height();switch(t.placement){case"bottom":n.css({top:r.top+r.height,left:r.left+r.width/2-o/2});break;case"top":n.css({top:r.top-u,left:r.left+r.width/2-o/2});break;case"left":n.css({top:r.top+r.height/2-u/2,left:r.left-o});break;case"right":n.css({top:r.top+r.height/2-u/2,left:r.left+r.width});break;case"bottom-right":n.css({top:r.top+r.height,left:r.left+r.width});break;case"top-right":n.css({top:r.top-u,left:r.left+i});break;case"top-left":n.css({top:r.top-u,left:r.left-s});break;case"bottom-left":n.css({top:r.top+e.outerHeight(),left:r.left-s});break;case"centered-right":n.css({top:r.top+u/2,left:r.left+i-s-3});break}}function v(e){return e.attr("maxlength")||e.attr("size")}var r=e("body"),i={alwaysShow:false,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important",separator:" / ",preText:"",postText:"",showMaxLength:true,placement:"bottom",showCharsTyped:true,validate:false,utf8:false};if(e.isFunction(t)&&!n){n=t;t={}}t=e.extend(i,t);return this.each(function(){var n=e(this),i=v(n),s=e("<span></span>").css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:999}).html(c(i,"0"));if(n.is("textarea")){n.data("maxlenghtsizex",n.outerWidth());n.data("maxlenghtsizey",n.outerHeight());n.mouseup(function(){if(n.outerWidth()!==n.data("maxlenghtsizex")||n.outerHeight()!==n.data("maxlenghtsizey")){d(n,s)}n.data("maxlenghtsizex",n.outerWidth());n.data("maxlenghtsizey",n.outerHeight())})}r.append(s);n.focus(function(){var e=a(n,v(n));h(e,n,i,s);d(n,s)});e(window).resize(function(){d(n,s)});n.blur(function(){s.css("display","none")});n.keyup(function(e){var r=a(n,v(n)),o=true,u=e.keyCode||e.which;if(r===0&&u===9&&!e.shiftKey){n.attr("maxlength",v(n)+1).trigger({type:"keypress",which:9}).attr("maxlength",v(n)-1)}if(t.validate&&r<0){o=false}else{h(r,n,i,s)}return o})})}})})(jQuery)
