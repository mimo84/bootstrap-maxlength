/* ========================================================== 
 * 
 * bootstrap-maxlength.js v 1.5.7 
 * Copyright 2014 Maurizio Napoleoni @mimonap
 * Licensed under MIT License
 * URL: https://github.com/mimo84/bootstrap-maxlength/blob/master/LICENSE
 *
 * ========================================================== */

!function(f){"use strict";f.event.special.destroyed||(f.event.special.destroyed={remove:function(c){c.handler&&c.handler()}});f.fn.extend({maxlength:function(c,k){function m(d){d=d.val();d=c.twoCharLinebreak?d.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"):d.replace(RegExp("\r?\n","g"),"\n");var a=0;if(c.utf8)for(var b=a=0;b<d.length;b++){var e=d.charCodeAt(b);128>e?a++:a=127<e&&2048>e?a+2:a+3}else a=d.length;return a}function t(c,a){return a-m(c)}function q(c,a){a.css({display:"block"});c.trigger("maxlength.shown")}function r(d,a){var b="";c.message?b=c.message.replace("%charsTyped%",a).replace("%charsRemaining%",d-a).replace("%charsTotal%",d):(c.preText&&(b+=c.preText),b=c.showCharsTyped?b+a:b+(d-a),c.showMaxLength&&(b+=c.separator+d),c.postText&&(b+=c.postText));return b}function s(d,a,b,e){e.html(r(b,b-d));if(0<d){var h=c.threshold,f=!0;!c.alwaysShow&&b-m(a)>h&&(f=!1);f?q(a,e.removeClass(c.limitReachedClass).addClass(c.warningClass)):(e.css({display:"none"}),a.trigger("maxlength.hidden"))}else q(a,e.removeClass(c.warningClass).addClass(c.limitReachedClass));c.allowOverMax&&(0>d?a.addClass("overmax"):a.removeClass("overmax"))}function l(d,a){var b;b=d[0];b=f.extend({},"function"===typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},d.offset());var e=d.outerWidth(),h=a.outerWidth(),n=a.width(),g=a.height();c.appendToParent&&(b.top-=d.parent().offset().top,b.left-=d.parent().offset().left);switch(c.placement){case "bottom":a.css({top:b.top+b.height,left:b.left+b.width/2-n/2});break;case "top":a.css({top:b.top-g,left:b.left+b.width/2-n/2});break;case "left":a.css({top:b.top+b.height/2-g/2,left:b.left-n});break;case "right":a.css({top:b.top+b.height/2-g/2,left:b.left+b.width});break;case "bottom-right":a.css({top:b.top+b.height,left:b.left+b.width});break;case "top-right":a.css({top:b.top-g,left:b.left+e});break;case "top-left":a.css({top:b.top-g,left:b.left-h});break;case "bottom-left":a.css({top:b.top+d.outerHeight(),left:b.left-h});break;case "centered-right":a.css({top:b.top+g/2,left:b.left+e-h-3});break;case "bottom-right-inside":a.css({top:b.top+b.height,left:b.left+b.width-h});break;case "top-right-inside":a.css({top:b.top-g,left:b.left+e-h});break;case "top-left-inside":a.css({top:b.top-g,left:b.left});break;case "bottom-left-inside":a.css({top:b.top+d.outerHeight(),left:b.left})}}function p(d){var a="maxlength";c.allowOverMax&&(a="data-bs-mxl");return d.attr(a)||d.attr("size")}var u=f("body");f.isFunction(c)&&!k&&(k=c,c={});c=f.extend({showOnReady:!1,alwaysShow:!1,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important label-danger",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom",showCharsTyped:!0,validate:!1,utf8:!1,appendToParent:!1,twoCharLinebreak:!0,allowOverMax:!1},c);return this.each(function(){function d(){var d=r(b,"0");b=p(a);e||(e=f('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(d));a.is("textarea")&&(a.data("maxlenghtsizex",a.outerWidth()),a.data("maxlenghtsizey",a.outerHeight()),a.mouseup(function(){a.outerWidth()===a.data("maxlenghtsizex")&&a.outerHeight()===a.data("maxlenghtsizey")||l(a,e);a.data("maxlenghtsizex",a.outerWidth());a.data("maxlenghtsizey",a.outerHeight())}));c.appendToParent?(a.parent().append(e),a.parent().css("position","relative")):u.append(e);d=t(a,p(a));s(d,a,b,e);l(a,e)}var a=f(this),b,e;f(window).resize(function(){e&&l(a,e)});c.allowOverMax&&(f(this).attr("data-bs-mxl",f(this).attr("maxlength")),f(this).removeAttr("maxlength"));c.showOnReady?a.ready(function(){d()}):a.focus(function(){d()});a.on("maxlength.reposition",function(){l(a,e)});a.on("destroyed",function(){e&&e.remove()});a.on("blur",function(){e&&!c.showOnReady&&e.remove()});a.on("input",function(){var d=p(a),f=d-m(a),g=!0;if(c.validate&&0>f){var f=a,g=f.val(),k=0;c.twoCharLinebreak&&(g=g.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"),"\n"===g.substr(g.length-1)&&1===g.length%2&&(k=1));f.val(g.substr(0,d-k));g=!1}else s(f,a,b,e);"bottom-right-inside"!==c.placement&&"top-right-inside"!==c.placement||l(a,e);return g})})}})})(jQuery);