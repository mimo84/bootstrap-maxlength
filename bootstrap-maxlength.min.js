/* ==========================================================
 * bootstrap-maxlength.js v1.4.2
 * 
 * Copyright (c) 2013 Maurizio Napoleoni; 
 *
 * Licensed under the terms of the MIT license.
 * See: https://github.com/mimo84/bootstrap-maxlength/blob/master/LICENSE
 * ========================================================== */
(function(e){"use strict";e.fn.extend({maxlength:function(t,n){function s(e){var t=e.val(),n=t.match(/\n/g),r=n?n.length:0;return e.val().length+r}function o(e,n,r){var i=true;if(!t.alwaysShow&&r-s(e)>n){i=false}return i}function u(e,t){var n=t-s(e);return n}function a(e){e.css({display:"block"})}function f(e){e.css({display:"none"})}function l(e,n){var r="";if(t.message){r=t.message.replace("%charsTyped%",n).replace("%charsRemaining%",e-n).replace("%charsTotal%",e)}else{if(t.preText){r+=t.preText}if(!t.showCharsTyped){r+=e-n}else{r+=n}if(t.showMaxLength){r+=t.separator+e}if(t.postText){r+=t.postText}}return r}function c(e,n,r,i){i.html(l(r,r-e));if(e>0){if(o(n,t.threshold,r)){a(i.removeClass(t.limitReachedClass).addClass(t.warningClass))}else{f(i)}}else{a(i.removeClass(t.warningClass).addClass(t.limitReachedClass))}}function h(t){var n=t[0];return e.extend({},typeof n.getBoundingClientRect==="function"?n.getBoundingClientRect():{width:n.offsetWidth,height:n.offsetHeight},t.offset())}function p(e,n){var r=h(e),i=e.outerWidth(),s=n.outerWidth(),o=n.width(),u=n.height();switch(t.placement){case"bottom":n.css({top:r.top+r.height,left:r.left+r.width/2-o/2});break;case"top":n.css({top:r.top-u,left:r.left+r.width/2-o/2});break;case"left":n.css({top:r.top+r.height/2-u/2,left:r.left-o});break;case"right":n.css({top:r.top+r.height/2-u/2,left:r.left+r.width});break;case"bottom-right":n.css({top:r.top+r.height,left:r.left+r.width});break;case"top-right":n.css({top:r.top-u,left:r.left+i});break;case"top-left":n.css({top:r.top-u,left:r.left-s});break;case"bottom-left":n.css({top:r.top+e.outerHeight(),left:r.left-s});break;case"centered-right":n.css({top:r.top+u/2,left:r.left+i-s-3});break}}function d(e){return e.attr("maxlength")||e.attr("size")}var r=e("body"),i={alwaysShow:false,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important",separator:" / ",preText:"",postText:"",message:"",showMaxLength:true,placement:"bottom",showCharsTyped:true,validate:false};if(e.isFunction(t)&&!n){n=t;t={}}t=e.extend(i,t);return this.each(function(){var n=e(this),i=d(n),s=e("<span></span>").css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:999}).html(l(i,"0"));if(n.is("textarea")){n.data("maxlenghtsizex",n.outerWidth());n.data("maxlenghtsizey",n.outerHeight());n.mouseup(function(){if(n.outerWidth()!==n.data("maxlenghtsizex")||n.outerHeight()!==n.data("maxlenghtsizey")){p(n,s)}n.data("maxlenghtsizex",n.outerWidth());n.data("maxlenghtsizey",n.outerHeight())})}r.append(s);n.focus(function(){var e=u(n,d(n));c(e,n,i,s);p(n,s)});e(window).resize(function(){p(n,s)});n.blur(function(){s.css("display","none")});n.keyup(function(e){var r=u(n,d(n)),o=true,a=e.keyCode||e.which;if(r===0&&a===9&&!e.shiftKey){n.attr("maxlength",d(n)+1).trigger({type:"keypress",which:9}).attr("maxlength",d(n)-1)}if(t.validate&&r<0){o=false}else{c(r,n,i,s)}return o})})}})})(jQuery)